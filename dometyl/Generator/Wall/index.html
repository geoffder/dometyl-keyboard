<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Wall (dometyl.Generator.Wall)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">dometyl</a> &#x00BB; <a href="../index.html">Generator</a> &#x00BB; Wall</nav><header class="odoc-preamble"><h1>Module <code><span>Generator.Wall</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-Steps" class="anchored"><a href="#module-Steps" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Steps/index.html">Steps</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Configuration type for number of steps used to draw the bezier curves that form the walls.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Edge" class="anchored"><a href="#module-Edge" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Edge/index.html">Edge</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Bezier curve wall edge type and helpers.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-EdgeDrawer" class="anchored"><a href="#module-EdgeDrawer" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="EdgeDrawer/index.html">EdgeDrawer</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Functions that find the point along the top and bottom edges of the start position of the wall closest to the given xy position, and provides a bezier edge to the ground starting from there.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Edges" class="anchored"><a href="#module-Edges" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Edges/index.html">Edges</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Bezier curves representing the four edges running from the start to the foot of each <a href="#type-t"><code>Wall.t</code></a></p></div></div><div class="odoc-spec"><div class="spec type" id="type-config" class="anchored"><a href="#type-config" class="anchor"></a><code><span><span class="keyword">type</span> config</span><span> = </span><span>{</span></code><table><tr id="type-config.d1" class="anchored"><td class="def record field"><a href="#type-config.d1" class="anchor"></a><code><span>d1 : <span class="xref-unresolved">Base</span>.float;</span></code></td></tr><tr id="type-config.d2" class="anchored"><td class="def record field"><a href="#type-config.d2" class="anchor"></a><code><span>d2 : <span class="xref-unresolved">Base</span>.float;</span></code></td></tr><tr id="type-config.z_off" class="anchored"><td class="def record field"><a href="#type-config.z_off" class="anchor"></a><code><span>z_off : <span class="xref-unresolved">Base</span>.float;</span></code></td></tr><tr id="type-config.thickness" class="anchored"><td class="def record field"><a href="#type-config.thickness" class="anchor"></a><code><span>thickness : <span class="xref-unresolved">Base</span>.float;</span></code></td></tr><tr id="type-config.clearance" class="anchored"><td class="def record field"><a href="#type-config.clearance" class="anchor"></a><code><span>clearance : <span class="xref-unresolved">Base</span>.float;</span></code></td></tr><tr id="type-config.n_steps" class="anchored"><td class="def record field"><a href="#type-config.n_steps" class="anchor"></a><code><span>n_steps : <a href="Steps/index.html#type-t">Steps.t</a>;</span></code></td></tr><tr id="type-config.n_facets" class="anchored"><td class="def record field"><a href="#type-config.n_facets" class="anchor"></a><code><span>n_facets : <span class="xref-unresolved">Base</span>.int;</span></code></td></tr><tr id="type-config.eyelet_config" class="anchored"><td class="def record field"><a href="#type-config.eyelet_config" class="anchor"></a><code><span>eyelet_config : <span><a href="../Eyelet/index.html#type-config">Eyelet.config</a> <span class="xref-unresolved">Base</span>.option</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-default" class="anchored"><a href="#val-default" class="anchor"></a><code><span><span class="keyword">val</span> default : <a href="#type-config">config</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><table><tr id="type-t.scad" class="anchored"><td class="def record field"><a href="#type-t.scad" class="anchor"></a><code><span>scad : <span class="xref-unresolved">Scad_ml</span>.Scad.d3;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Aggregate scad, including screw outshoot if included</p><span class="comment-delim">*)</span></td></tr><tr id="type-t.start" class="anchored"><td class="def record field"><a href="#type-t.start" class="anchor"></a><code><span>start : <a href="../Points/index.html#type-t">Points.t</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Corner points of the <a href="../KeyHole/Face/index.html#type-t"><code>KeyHole.Face.t</code></a> this wall emerged from</p><span class="comment-delim">*)</span></td></tr><tr id="type-t.foot" class="anchored"><td class="def record field"><a href="#type-t.foot" class="anchor"></a><code><span>foot : <a href="../Points/index.html#type-t">Points.t</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Terminal points where the wall meets the XY plane.</p><span class="comment-delim">*)</span></td></tr><tr id="type-t.edge_drawer" class="anchored"><td class="def record field"><a href="#type-t.edge_drawer" class="anchor"></a><code><span>edge_drawer : <a href="EdgeDrawer/index.html#type-t">EdgeDrawer.t</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Generate <a href="Edge/index.html#type-t"><code>Edge.t</code></a>'s emerging from point along top and bottom starting edges of the wall closest to the provided <code>Vec3</code>.t on the XY plane.</p><span class="comment-delim">*)</span></td></tr><tr id="type-t.edges" class="anchored"><td class="def record field"><a href="#type-t.edges" class="anchor"></a><code><span>edges : <a href="Edges/index.html#type-t">Edges.t</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Bezier curves that specify the edge vertices.</p><span class="comment-delim">*)</span></td></tr><tr id="type-t.screw" class="anchored"><td class="def record field"><a href="#type-t.screw" class="anchor"></a><code><span>screw : <span><a href="../Eyelet/index.html#type-t">Eyelet.t</a> <span class="xref-unresolved">Base</span>.option</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Scad, coordinates, and config of screw offshoot if included.</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Record representing a wall extending from a <a href="../KeyHole/Face/index.html#type-t"><code>KeyHole.Face.t</code></a> to the ground.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-translate" class="anchored"><a href="#val-translate" class="anchor"></a><code><span><span class="keyword">val</span> translate : <span><span class="xref-unresolved">Scad_ml</span>.Vec3.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-scale" class="anchored"><a href="#val-scale" class="anchor"></a><code><span><span class="keyword">val</span> scale : <span><span class="xref-unresolved">Scad_ml</span>.Vec3.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-rotate" class="anchored"><a href="#val-rotate" class="anchor"></a><code><span><span class="keyword">val</span> rotate : <span><span class="xref-unresolved">Scad_ml</span>.Vec3.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-rotate_about_pt" class="anchored"><a href="#val-rotate_about_pt" class="anchor"></a><code><span><span class="keyword">val</span> rotate_about_pt : <span><span class="xref-unresolved">Scad_ml</span>.Vec3.t <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Scad_ml</span>.Vec3.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-quaternion" class="anchored"><a href="#val-quaternion" class="anchor"></a><code><span><span class="keyword">val</span> quaternion : <span><span class="xref-unresolved">Scad_ml</span>.Quaternion.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-quaternion_about_pt" class="anchored"><a href="#val-quaternion_about_pt" class="anchor"></a><code><span><span class="keyword">val</span> quaternion_about_pt : <span><span class="xref-unresolved">Scad_ml</span>.Quaternion.t <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Scad_ml</span>.Vec3.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mirror" class="anchored"><a href="#val-mirror" class="anchor"></a><code><span><span class="keyword">val</span> mirror : <span><span class="xref-unresolved">Scad_ml</span>.Vec3.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-swing_face" class="anchored"><a href="#val-swing_face" class="anchor"></a><code><span><span class="keyword">val</span> swing_face : <span>?step:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Scad_ml</span>.Vec3.t <span class="arrow">&#45;&gt;</span></span> <span><a href="../KeyHole/Face/index.html#type-t">KeyHole.Face.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../KeyHole/Face/index.html#type-t">KeyHole.Face.t</a> * <span class="xref-unresolved">Scad_ml</span>.Vec3.t</span></code></div><div class="spec-doc"><p><code>swing_face ?step key_orgin face</code></p><p>Iteratively find a rotation around <code>face</code>s bottom or top axis, depending on which way it is pointing in z (determined with <code>key_origin</code>), that brings <code>face</code> to a more vertical orientation, returning a pivoted <a href="../KeyHole/Face/index.html#type-t"><code>KeyHole.Face.t</code></a> and it's new orthogonal <code>Vec3</code>.t.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-poly_siding" class="anchored"><a href="#val-poly_siding" class="anchor"></a><code><span><span class="keyword">val</span> poly_siding : <span>?x_off:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span> <span>?y_off:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span> <span>?z_off:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span>
<span>?clearance:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span> <span>?n_steps:<span>[&lt; <span>`Flat of <span class="xref-unresolved">Base</span>.int</span> <span><span>| `PerZ</span> of <span class="xref-unresolved">Base</span>.float</span> Flat ]</span> <span class="arrow">&#45;&gt;</span></span>
<span>?n_facets:<span class="xref-unresolved">Base</span>.int <span class="arrow">&#45;&gt;</span></span> <span>?d1:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span> <span>?d2:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span> <span>?thickness:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span> <span>?eyelet_config:<a href="../Eyelet/index.html#type-config">Eyelet.config</a> <span class="arrow">&#45;&gt;</span></span>
<span><span>[&lt; `East <span>| `North</span> <span>| `South</span> <span>| `West</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../KeyHole/index.html#type-t">KeyHole.t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>poly_siding ?x_off ?y_off ?z_off ?clearance ?n_steps ?n_facets ?d1 ?d2 ?thickness
      ?eyelet_config side keyhole</code></p><p>Generate a <a href="#type-t"><code>t</code></a> using an OpenScad polyhedron, drawn from a set of bezier curves from the <code>side</code> facing edges of <code>keyhole</code>. Optional parameters influence the shape of the generated wall:</p><ul><li><code>x_off</code> and <code>y_off</code> shift the target endpoints (on the ground) of the wall</li><li><code>z_off</code> shifts the second bezier control point in z (positive would lead to more arc)</li><li><code>clearance</code> moves the start of the wall out from the face of the keyhole</li><li><code>n_steps</code> controls the number of points used to draw the wall (see: <a href="Steps/index.html"><code>Steps</code></a>). This impact the aeshetics of the wall, but it also determines how well the wall follows the bezier curve, which can have implications for positioning the cutouts for ports near the bottom of the case. A number of steps that is too high can sometimes cause the generated polyhedrons to fail, as points can bunch up, leading to a mesh that is difficult for the OpenScad engine (CGAL) to close. When this happens, either decreasing number of steps (can be done preferentially for short walls with `PerZ), or increasing <code>n_facets</code> to increase the number of (and decrease the size of) triangles that CGAL can use to close the wall shape.</li><li><code>n_facets</code> sets the number of polyhedron faces assigned to the outside and inside of the wall. Values above one will introduce additional beziers of vertices spaced between the ends of the wall, leading to a finer triangular mesh.</li><li><code>d1</code> and <code>d2</code> set the distance projected outward along the orthogonal of the <code>side</code> of the <code>keyhole</code> on the xy-plane used to for the second and third quadratic bezier control points respectively.</li><li><code>thickness</code> influences the thickness of the wall (from inside to outside face)</li><li>If provided, <code>eyelet_config</code> describes the screw/bumpon eyelet that should be added to the bottom of the generated wall.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-poly_of_config" class="anchored"><a href="#val-poly_of_config" class="anchor"></a><code><span><span class="keyword">val</span> poly_of_config : <span>?x_off:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span> <span>?y_off:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span>
<span><a href="#type-config">config</a> <span class="arrow">&#45;&gt;</span></span> <span><span>[&lt; `East <span>| `North</span> <span>| `South</span> <span>| `West</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../KeyHole/index.html#type-t">KeyHole.t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-column_drop" class="anchored"><a href="#val-column_drop" class="anchor"></a><code><span><span class="keyword">val</span> column_drop : <span>?z_off:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span> <span>?clearance:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span>
<span>?n_steps:<span>[&lt; <span>`Flat of <span class="xref-unresolved">Base</span>.int</span> <span><span>| `PerZ</span> of <span class="xref-unresolved">Base</span>.float</span> Flat ]</span> <span class="arrow">&#45;&gt;</span></span> <span>?n_facets:<span class="xref-unresolved">Base</span>.int <span class="arrow">&#45;&gt;</span></span>
<span>?d1:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span> <span>?d2:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span> <span>?thickness:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span> <span>?eyelet_config:<a href="../Eyelet/index.html#type-config">Eyelet.config</a> <span class="arrow">&#45;&gt;</span></span> <span>spacing:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span>
<span>columns:<span><span class="type-var">'k</span> <a href="../Columns/index.html#type-t">Columns.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>[&lt; `North <span>| `South</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>column_drop ?z_off ?clearance ?n_steps ?n_facets ?d1 ?d2 ?thickness ?eyelet_config
      ~spacing ~columns idx</code></p><p>Wrapper function for <a href="#val-poly_siding"><code>poly_siding</code></a> specifically for (north and south) column end walls. Unlike <a href="#val-poly_siding"><code>poly_siding</code></a>, which takes a <a href="../KeyHole/index.html#type-t"><code>KeyHole.t</code></a>, this takes the map <code>columns</code>, and an <code>idx</code> specifying the column to generate the wall for. Overhang over the next column (to the right) that may have been introduced by tenting is checked for, and an x offset that will reclaim the desired column <code>spacing</code> is calculated and passed along to <a href="#val-poly_siding"><code>poly_siding</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-drop_of_config" class="anchored"><a href="#val-drop_of_config" class="anchor"></a><code><span><span class="keyword">val</span> drop_of_config : <span>spacing:<span class="xref-unresolved">Base</span>.float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-config">config</a> <span class="arrow">&#45;&gt;</span></span> <span>columns:<span><span class="type-var">'k</span> <a href="../Columns/index.html#type-t">Columns.t</a></span> <span class="arrow">&#45;&gt;</span></span>
<span><span>[&lt; `North <span>| `South</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-start_direction" class="anchored"><a href="#val-start_direction" class="anchor"></a><code><span><span class="keyword">val</span> start_direction : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Scad_ml</span>.Vec3.t</span></code></div><div class="spec-doc"><p><code>start_direction t</code></p><p>Direction vector from right to left of the wall start points.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-foot_direction" class="anchored"><a href="#val-foot_direction" class="anchor"></a><code><span><span class="keyword">val</span> foot_direction : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Scad_ml</span>.Vec3.t</span></code></div><div class="spec-doc"><p><code>foot_direction t</code></p><p>Direction vector from right to left of the wall foot points.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_scad" class="anchored"><a href="#val-to_scad" class="anchor"></a><code><span><span class="keyword">val</span> to_scad : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Scad_ml</span>.Scad.d3</span></code></div></div></div></body></html>